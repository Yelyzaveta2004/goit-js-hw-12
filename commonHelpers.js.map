{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["const API_KEY = '35544467-972bad3ac294320c3ee48db53';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(searchQuery, pageNum) {\n    const perPage = 15;\n    const url = `${BASE_URL}?key=${API_KEY}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${pageNum}&per_page=${perPage}`;\n\n    try {\n        const response = await axios.get(url);\n        if (response.status !== 200) {\n            throw new Error('Failed to fetch images');\n        }\n        return response.data.hits;\n    } catch (error) {\n        console.error('Error fetching images:', error.message);\n        throw error;\n    }\n}\n","import iziToast from \"izitoast\";\n\nexport function showLoadingIndicator() {\n    iziToast.show({\n        title: 'Loading',\n        message: 'Fetching images from Pixabay...',\n        theme: 'dark',\n        progressBarColor: '#17a2b8',\n        position: 'bottomRight',\n    });\n}\n\nexport function hideLoadingIndicator() {\n    iziToast.hide({}, document.querySelector('.iziToast'));\n}\n\nexport function renderImages(images) {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n\n    if (images.length === 0) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topCenter',\n        });\n        return;\n    }\n\n    const fragment = document.createDocumentFragment();\n    images.forEach(image => {\n        const card = document.createElement('div');\n        card.classList.add('card');\n        card.innerHTML = `\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" data-large=\"${image.largeImageURL}\">\n            <div class=\"info\">\n                <span>${image.likes} Likes</span>\n                <span>${image.views} Views</span>\n                <span>${image.comments} Comments</span>\n                <span>${image.downloads} Downloads</span>\n            </div>\n        `;\n        fragment.appendChild(card);\n    });\n    gallery.appendChild(fragment);\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\nimport iziToast from \"izitoast\";\n\nlet searchQuery = '';\nlet page = 1;\n\nimport { fetchImages } from \"./js/pixabay-api.js\"\nimport { showLoadingIndicator, hideLoadingIndicator, renderImages } from \"./js/render-functions.js\";\n\nconst searchForm = document.querySelector('#search-form');\nconst loadMoreButton = document.querySelector('#load-more');\nconst loadingIndicator = document.querySelector('#loading-indicator');\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    searchQuery = document.querySelector('#search-input').value.trim();\n    page = 1;\n    await searchImages(searchQuery, page);\n});\n\nloadMoreButton.addEventListener('click', async () => {\n    page++;\n    await searchImages(searchQuery, page);\n});\n\nasync function searchImages(query, pageNum) {\n    showLoadingIndicator();\n    try {\n        const images = await fetchImages(query, pageNum);\n        renderImages(images);\n\n        if (images.length === 0) {\n            hideLoadingIndicator();\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topCenter',\n            });\n            return;\n        }\n\n        if (pageNum === 1) {\n            const lightbox = new SimpleLightbox('.gallery img');\n            lightbox.refresh();\n        }\n\n        if (images.length < 15) {\n            loadMoreButton.style.display = 'none';\n            iziToast.info({\n                title: 'Info',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topCenter',\n            });\n        } else {\n            loadMoreButton.style.display = 'block';\n        }\n\n        smoothScroll();\n    } catch (error) {\n        console.error('Error searching for images:', error.message);\n    } finally {\n        hideLoadingIndicator();\n    }\n}\n\nfunction smoothScroll() {\n    const galleryHeight = document.querySelector('.gallery').getBoundingClientRect().height;\n    window.scrollBy({\n        top: galleryHeight * 2,\n        behavior: 'smooth'\n    });\n}"],"names":["API_KEY","BASE_URL","fetchImages","searchQuery","pageNum","url","response","error","showLoadingIndicator","iziToast","hideLoadingIndicator","renderImages","images","gallery","fragment","image","card","page","searchForm","loadMoreButton","event","searchImages","query","SimpleLightbox","smoothScroll","galleryHeight"],"mappings":"6vBAAA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAaC,EAAS,CAEpD,MAAMC,EAAM,GAAGJ,CAAQ,QAAQD,CAAO,MAAMG,CAAW,iEAAiEC,CAAO,eAE/H,GAAI,CACA,MAAME,EAAW,MAAM,MAAM,IAAID,CAAG,EACpC,GAAIC,EAAS,SAAW,IACpB,MAAM,IAAI,MAAM,wBAAwB,EAE5C,OAAOA,EAAS,KAAK,IACxB,OAAQC,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,EAAM,OAAO,EAC/CA,CACT,CACL,CCfO,SAASC,GAAuB,CACnCC,EAAS,KAAK,CACV,MAAO,UACP,QAAS,kCACT,MAAO,OACP,iBAAkB,UAClB,SAAU,aAClB,CAAK,CACL,CAEO,SAASC,GAAuB,CACnCD,EAAS,KAAK,CAAE,EAAE,SAAS,cAAc,WAAW,CAAC,CACzD,CAEO,SAASE,EAAaC,EAAQ,CACjC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAGjD,GAFAA,EAAQ,UAAY,GAEhBD,EAAO,SAAW,EAAG,CACrBH,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2EACT,SAAU,WACtB,CAAS,EACD,MACH,CAED,MAAMK,EAAW,SAAS,yBAC1BF,EAAO,QAAQG,GAAS,CACpB,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAU,IAAI,MAAM,EACzBA,EAAK,UAAY;AAAA,wBACDD,EAAM,YAAY,UAAUA,EAAM,IAAI,iBAAiBA,EAAM,aAAa;AAAA;AAAA,wBAE1EA,EAAM,KAAK;AAAA,wBACXA,EAAM,KAAK;AAAA,wBACXA,EAAM,QAAQ;AAAA,wBACdA,EAAM,SAAS;AAAA;AAAA,UAG/BD,EAAS,YAAYE,CAAI,CACjC,CAAK,EACDH,EAAQ,YAAYC,CAAQ,CAChC,CCvCA,IAAIX,EAAc,GACdc,EAAO,EAKX,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAiB,SAAS,cAAc,YAAY,EACjC,SAAS,cAAc,oBAAoB,EAEpED,EAAW,iBAAiB,SAAU,MAAOE,GAAU,CACnDA,EAAM,eAAc,EACpBjB,EAAc,SAAS,cAAc,eAAe,EAAE,MAAM,OAC5Dc,EAAO,EACP,MAAMI,EAAalB,EAAac,CAAI,CACxC,CAAC,EAEDE,EAAe,iBAAiB,QAAS,SAAY,CACjDF,IACA,MAAMI,EAAalB,EAAac,CAAI,CACxC,CAAC,EAED,eAAeI,EAAaC,EAAOlB,EAAS,CACxCI,IACA,GAAI,CACA,MAAMI,EAAS,MAAMV,EAAYoB,EAAOlB,CAAO,EAG/C,GAFAO,EAAaC,CAAM,EAEfA,EAAO,SAAW,EAAG,CACrBF,IACAD,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2EACT,SAAU,WAC1B,CAAa,EACD,MACH,CAEGL,IAAY,GACK,IAAImB,EAAe,cAAc,EACzC,QAAO,EAGhBX,EAAO,OAAS,IAChBO,EAAe,MAAM,QAAU,OAC/BV,EAAS,KAAK,CACV,MAAO,OACP,QAAS,6DACT,SAAU,WAC1B,CAAa,GAEDU,EAAe,MAAM,QAAU,QAGnCK,GACH,OAAQjB,EAAO,CACZ,QAAQ,MAAM,8BAA+BA,EAAM,OAAO,CAClE,QAAc,CACNG,GACH,CACL,CAEA,SAASc,GAAe,CACpB,MAAMC,EAAgB,SAAS,cAAc,UAAU,EAAE,sBAAuB,EAAC,OACjF,OAAO,SAAS,CACZ,IAAKA,EAAgB,EACrB,SAAU,QAClB,CAAK,CACL"}